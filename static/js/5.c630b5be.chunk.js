(this["webpackJsonpreact-way-of-samurai"]=this["webpackJsonpreact-way-of-samurai"]||[]).push([[5],{494:function(e,t,n){"use strict";n.r(t);var c=n(92),a=n(181),r=n(3),s=n(4),o=n(0),i=n(6),l=n.n(i),u=n(257),d=function(e,t){var n={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(c=Object.getOwnPropertySymbols(e);a<c.length;a++)t.indexOf(c[a])<0&&Object.prototype.propertyIsEnumerable.call(e,c[a])&&(n[c[a]]=e[c[a]])}return n},j=function(e){return o.createElement(u.a,null,(function(t){var n,c=t.getPrefixCls,a=t.direction,i=e.prefixCls,u=e.type,j=void 0===u?"horizontal":u,b=e.orientation,v=void 0===b?"center":b,O=e.className,f=e.children,h=e.dashed,p=e.plain,x=d(e,["prefixCls","type","orientation","className","children","dashed","plain"]),m=c("divider",i),w=v.length>0?"-".concat(v):v,g=!!f,y=l()(m,"".concat(m,"-").concat(j),(n={},Object(s.a)(n,"".concat(m,"-with-text"),g),Object(s.a)(n,"".concat(m,"-with-text").concat(w),g),Object(s.a)(n,"".concat(m,"-dashed"),!!h),Object(s.a)(n,"".concat(m,"-plain"),!!p),Object(s.a)(n,"".concat(m,"-rtl"),"rtl"===a),n),O);return o.createElement("div",Object(r.a)({className:y},x,{role:"separator"}),f&&o.createElement("span",{className:"".concat(m,"-inner-text")},f))}))},b=n(2),v=function(){var e=Object(o.useState)(null),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(o.useEffect)((function(){var e,t=function(){console.log("close wsChannel"),setTimeout(n,5e3)};function n(){var n,a,r;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(a=e)||void 0===a||a.close(),null===(r=e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))||void 0===r||r.addEventListener("close",t),c(e)}return n(),function(){var n,c;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(c=e)||void 0===c||c.close()}}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)(O,{wsChannel:n}),Object(b.jsx)(h,{wsChannel:n})]})},O=function(e){var t=e.wsChannel,n=Object(o.useState)([]),r=Object(a.a)(n,2),s=r[0],i=r[1];return Object(o.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);i((function(e){return[].concat(Object(c.a)(e),Object(c.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(b.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:s.map((function(e,t){return Object(b.jsx)(f,{message:e},t)}))})},f=function(e){var t=e.message;return Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{src:t.photo,style:{width:"40px",borderRadius:"50%"},alt:"message"}),Object(b.jsxs)("b",{children:[t.userName," "]}),Object(b.jsxs)("b",{children:["id: ",t.userId]}),Object(b.jsx)("p",{children:t.message}),Object(b.jsx)(j,{})]})},h=function(e){var t=e.wsChannel,n=Object(o.useState)(""),c=Object(a.a)(n,2),r=c[0],s=c[1],i=Object(o.useState)("pending"),l=Object(a.a)(i,2),u=l[0],d=l[1];Object(o.useEffect)((function(){var e=function(){d("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("textarea",{onChange:function(e){return s(e.target.value)},value:r})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{disabled:null===t||"ready"!==u,onClick:function(){r&&(null===t||void 0===t||t.send(r),s(""))},children:"send"})})]})};t.default=function(){return Object(b.jsx)(v,{})}}}]);
//# sourceMappingURL=5.c630b5be.chunk.js.map