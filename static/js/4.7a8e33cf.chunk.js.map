{"version":3,"sources":["components/common/FormsControls/FormsControls.module.css","components/common/FormsControls/FormsControls.jsx","utils/validators/validators.js","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/MyPosts/MyPosts.module.css","assets/images/avataaars.png","components/Profile/ProfileInfo/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["module","exports","FormControl","input","meta","props","child","hasError","touched","error","className","styles","formControl","children","Textarea","restProps","Input","required","value","maxLengthCreator","maxLength","length","ProfileStatusWithHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onChange","e","target","onBlur","updateStatus","autoFocus","onDoubleClick","ProfileInfo","profile","isOwner","savePhoto","Preloader","descriptionBlock","userPhoto","src","photos","large","avataaars","alt","inputWrapper","type","files","name","id","inputFile","for","inputFileButton","inputFileButtonText","fullName","aboutMe","userId","statusBlock","Post","item","width","height","message","like","likeCounter","maxLength30","AddPostFormRedux","reduxForm","form","handleSubmit","onSubmit","postBlock","Field","component","placeholder","validate","MyPosts","React","memo","postsElements","posts","reverse","map","p","i","postsBlock","addPost","newPostText","MyPostsContainer","connect","state","profilePage","dispatch","addPostActionCreator","Profile","ProfileContainer","this","match","params","autorizedUserId","history","push","getUserProfile","getStatus","refreshProfile","prevProps","prevState","Number","Component","compose","auth","isAuth","withRouter"],"mappings":"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","file":"static/js/4.7a8e33cf.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginFormWrapper\":\"FormsControls_loginFormWrapper__QJkSz\",\"formControl\":\"FormsControls_formControl__ZczVY\",\"error\":\"FormsControls_error__-uRCD\",\"formSummaryError\":\"FormsControls_formSummaryError__2HC3s\"};","import styles from './FormsControls.module.css';\r\n\r\nexport const FormControl = ({ input, meta, child, ...props }) => {\r\n  const hasError = meta.touched && meta.error;\r\n\r\n  return (\r\n    <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n      <div>{props.children}</div>\r\n      {hasError && <span>{meta.error}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Textarea = (props) => {\r\n  const { input, meta, child, ...restProps } = props;\r\n\r\n  return (\r\n    <FormControl {...props}>\r\n      <textarea {...input} {...restProps} />\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport const Input = (props) => {\r\n  const { input, meta, child, ...restProps } = props;\r\n\r\n  return (\r\n    <FormControl {...props}>\r\n      <input {...input} {...restProps} />\r\n    </FormControl>\r\n  );\r\n};\r\n\r\n// export const Textarea = ({ input, meta, ...props }) => {\r\n//   const hasError = meta.touched && meta.error;\r\n\r\n//   return (\r\n//     <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n//       <div>\r\n//         <textarea {...input} {...props} />\r\n//       </div>\r\n//       {hasError && <span>{meta.error}</span>}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export const Input = ({ input, meta, ...props }) => {\r\n//   const hasError = meta.touched && meta.error;\r\n\r\n//   return (\r\n//     <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n//       <div>\r\n//         <input {...input} {...props} />\r\n//       </div>\r\n//       {hasError && <span>{meta.error}</span>}\r\n//     </div>\r\n//   );\r\n// };\r\n","export const required = (value) => {\r\n  if (value) return undefined;\r\n  return 'Field is required';\r\n};\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n  if (value && value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n  return undefined;\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__1NNXR\",\"userPhoto\":\"ProfileInfo_userPhoto__yWMww\",\"statusBlock\":\"ProfileInfo_statusBlock__3SAiq\",\"inputWrapper\":\"ProfileInfo_inputWrapper__1ARM0\",\"inputFile\":\"ProfileInfo_inputFile__26GYr\",\"inputFileButton\":\"ProfileInfo_inputFileButton__ONqPO\",\"inputFileButtonText\":\"ProfileInfo_inputFileButtonText__3PLiH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__tewBo\",\"like\":\"Post_like__uZX4v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__1x4Hf\",\"postBlock\":\"MyPosts_postBlock__1zPAp\",\"posts\":\"MyPosts_posts__2Xfo7\"};","export default __webpack_public_path__ + \"static/media/avataaars.4186f5f3.png\";","import React, { useState, useEffect } from 'react';\r\n\r\nconst ProfileStatusWithHooks = (props) => {\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [status, setStatus] = useState(props.status);\r\n\r\n  useEffect(() => {\r\n    setStatus(props.status);\r\n  }, [props.status]); //принимает зависимость от статуса прищедшего в пропсах и синхронизирует статусы в ЛС и ГС\r\n\r\n  const activateEditMode = () => {\r\n    setEditMode(true);\r\n    // setStatus(props.status); //сетаем статус из пропсов, чтобы инпут не обнулялся при переходе с других страниц\r\n  };\r\n\r\n  const deactivateEditMode = () => {\r\n    setEditMode(false);\r\n    props.updateStatus(status); //TC передаем статус(текущее значение поля инпута - сидящее в 'локальном' стейте)\r\n  };\r\n\r\n  const onStatusChange = (e) => {\r\n    setStatus(e.target.value); //сетаем в ЛС хука текущее значение поля инпута\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!editMode ? (\r\n        <div>\r\n          <span onDoubleClick={activateEditMode}>{props.status || '-----'}</span>\r\n        </div> //копия из ГС(пропсы)\r\n      ) : (\r\n        <div>\r\n          <input\r\n            onChange={onStatusChange}\r\n            onBlur={deactivateEditMode}\r\n            autoFocus={true}\r\n            value={status}></input>\r\n        </div> //вначале копия из ЛС, во время изменения сохранение в локальном стейте обработчик onChange, после потери фокуса deactivateEditMode отпраялем данные на сервер, после ответа сервера меняется ГС и рендер статуса\r\n      )}\r\n    </div> //по условию показываем или статус или поле редактирования\r\n  );\r\n};\r\n\r\nexport default ProfileStatusWithHooks;\r\n","import Preloader from '../../common/preloader/Preloader';\r\nimport styles from './ProfileInfo.module.css';\r\nimport avataaars from '../../../assets/images/avataaars.png';\r\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks'; //следить за переименованием из FC в CC\r\n\r\nconst ProfileInfo = ({ profile, status, updateStatus, isOwner, savePhoto }) => {\r\n  // if (props.profile === null || props.profile === undefined)\r\n  if (!profile) {\r\n    return <Preloader />;\r\n  }\r\n\r\n  const onMainPhotoSelected = (e) => {\r\n    // debugger;\r\n    if (e.target.files.length) {\r\n      savePhoto(e.target.files[0]);\r\n    } //проверяем что файлы прицепились и повесили на обработчик инпута колбэк TC\r\n  };\r\n  // debugger;\r\n  return (\r\n    <div>\r\n      <div className={styles.descriptionBlock}>\r\n        <img\r\n          className={styles.userPhoto}\r\n          src={profile.photos.large != null ? profile.photos.large : avataaars}\r\n          alt='user avatar'\r\n        />\r\n        {/* <div>{isOwner && <input type={'file'} onChange={onMainPhotoSelected} />}</div> */}\r\n        <div className={styles.inputWrapper}>\r\n          {isOwner ? (\r\n            <div>\r\n              <input\r\n                type={'file'}\r\n                onChange={onMainPhotoSelected}\r\n                name='file'\r\n                id='input__file'\r\n                className={styles.inputFile}\r\n              />\r\n              <label for='input__file' className={styles.inputFileButton}>\r\n                <span className={styles.inputFileButtonText}>Выберите файл</span>\r\n              </label>\r\n            </div> //инпут спрятан за лейбл и стилизован под кнопку\r\n          ) : (\r\n            ''\r\n          )}\r\n        </div>\r\n        <div>\r\n          <span>{profile.fullName}</span>\r\n        </div>\r\n        <div>\r\n          <span>{profile.aboutMe}</span>\r\n        </div>\r\n        <div>\r\n          <span>idUser: {profile.userId}</span>\r\n        </div>\r\n        <div className={styles.statusBlock}>\r\n          <ProfileStatusWithHooks status={status} updateStatus={updateStatus} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileInfo;\r\n","import styles from './Post.module.css';\r\n\r\nconst Post = (props) => (\r\n  <div className={styles.item}>\r\n    <img\r\n      src='https://e7.pngegg.com/pngimages/57/256/png-clipart-bender-philip-j-fry-computer-icons-leela-bender-smiley-cartoon.png'\r\n      width='60'\r\n      height='60'\r\n      alt='avatar'\r\n    />\r\n    <p>{props.message}</p>\r\n    <div className={styles.like}>\r\n      <img\r\n        src='https://w7.pngwing.com/pngs/49/109/png-transparent-facebook-like-button-giphy-social-network-advertising-facebook-text-hand-rectangle-thumbnail.png'\r\n        width='15'\r\n        height='15'\r\n        alt='like'\r\n      />\r\n      <span>{props.likeCounter}</span>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Post;\r\n","import Post from './Post/Post';\r\nimport styles from './MyPosts.module.css';\r\nimport React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { required, maxLengthCreator } from '../../../utils/validators/validators';\r\nimport { Textarea } from '../../common/FormsControls/FormsControls';\r\n\r\nconst maxLength30 = maxLengthCreator(30);\r\n\r\nconst AddPostForm = (props) => {\r\n  const { handleSubmit } = props;\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.postBlock}>\r\n      <div>\r\n        <Field\r\n          component={Textarea}\r\n          name={'newPostText'}\r\n          placeholder={'Enter your post text'}\r\n          validate={[required, maxLength30]}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button>Add post</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst AddPostFormRedux = reduxForm({ form: 'postAddPostForm' })(AddPostForm);\r\n\r\nconst MyPosts = React.memo((props) => {\r\n  // debugger;\r\n  const postsElements = [...props.posts] //иммутабельность - меняем отображение постов на странице не затрагивая исходные данные, а делая копию и ее переворачивая\r\n    .reverse()\r\n    .map((p, i) => <Post key={i} message={p.message} likeCounter={p.likeCounter} />);\r\n\r\n  const addNewPost = (value) => {\r\n    props.addPost(value.newPostText);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.postsBlock}>\r\n      <h3>My posts</h3>\r\n      <AddPostFormRedux onSubmit={addNewPost} />\r\n      <div className={styles.posts}>{postsElements}</div>\r\n    </div>\r\n  );\r\n}); //обернули ХОКом мемо, тест, решает проблему с лишними рендерами при неизменившихся пропсах и стейте\r\n\r\nexport default MyPosts;\r\n","import { connect } from 'react-redux';\r\nimport { addPostActionCreator } from '../../../redux/profile-reducer';\r\nimport MyPosts from './MyPosts';\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    posts: state.profilePage.posts,\r\n    newPostText: state.profilePage.newPostText,\r\n  };\r\n};\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addPost: (newPostText) => {\r\n      dispatch(addPostActionCreator(newPostText));\r\n    },\r\n  };\r\n};\r\n\r\nlet MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\nexport default MyPostsContainer;\r\n","import ProfileInfo from './ProfileInfo/ProfileInfo';\r\n// import MyPosts from './MyPosts/MyPosts';\r\n// import classes from './Profile.module.css'\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\r\n// import store from '../../redux/store';\r\n\r\nconst Profile = (props) => {\r\n  // debugger;\r\n  return (\r\n    <div>\r\n      <ProfileInfo\r\n        isOwner={props.isOwner}\r\n        savePhoto={props.savePhoto}\r\n        profile={props.profile}\r\n        status={props.status}\r\n        updateStatus={props.updateStatus}\r\n      />\r\n      <MyPostsContainer\r\n      // store={props.store}\r\n      // posts={props.profilePage.posts}\r\n      // dispatch={props.dispatch}\r\n      // newPostText={props.profilePage.newPostText}\r\n      // updateNewPostText={props.updateNewPostText}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","// import ProfileInfo from './ProfileInfo/ProfileInfo';\r\n// import MyPosts from './MyPosts/MyPosts';\r\n// import classes from './Profile.module.css'\r\n// import MyPostsContainer from './MyPosts/MyPostsContainer';\r\n// import store from '../../redux/store';\r\nimport React from 'react';\r\n// import axios from 'axios';\r\nimport Profile from './Profile';\r\nimport { connect } from 'react-redux';\r\nimport { getUserProfile, getStatus, updateStatus, savePhoto } from '../../redux/profile-reducer';\r\nimport { withRouter } from 'react-router';\r\n// import { usersAPI } from '../../api/api';\r\n// import { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\n\r\nclass ProfileContainer extends React.Component {\r\n  refreshProfile() {\r\n    let userId = this.props.match.params.userId; //объявляем переменную userId которой присваиваем значение из пропсов(которые появились там после оборачивания ХОКом withRouter)\r\n    // let userId = this.props.match.params.userId || 20627;\r\n    if (!userId) {\r\n      userId = this.props.autorizedUserId;\r\n      // userId = 20627;//проверка что userId не null или undefined\r\n      if (!userId) {\r\n        this.props.history.push('/login');\r\n      } //если и в autorizedUserId нет userId тогда переадресация на Логин встроенным методом withRouter\r\n    }\r\n    this.props.getUserProfile(userId); //TC получения профиля\r\n    this.props.getStatus(userId); //TC получения статуса\r\n  }\r\n\r\n  componentDidMount() {\r\n    // console.log('auth', this.props.autorizedUserId);\r\n    // console.log('params', Number(this.props.match.params.userId));\r\n\r\n    // debugger;\r\n    this.refreshProfile();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // debugger;\r\n    if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n      this.refreshProfile(); //сравниваем текущие пропсы userId с прошлыми\r\n    }\r\n  } //с условием избегаем зациклености ререндеров при получении пропсов\r\n\r\n  render() {\r\n    return (\r\n      <Profile\r\n        {...this.props}\r\n        isOwner={\r\n          !this.props.match.params.userId ||\r\n          Number(this.props.match.params.userId) === this.props.autorizedUserId\r\n        } //если в строке URL есть Id, значит мы на чужой странице, если нет - на своей и можно будет загрузить аватар или проверим если Id это Id авторизированого юзера то тоже можно загрузить аватар\r\n        savePhoto={this.props.savePhoto}\r\n        profile={this.props.profile}\r\n        status={this.props.status}\r\n        updateStatus={this.props.updateStatus}\r\n      />\r\n    );\r\n  }\r\n}\r\n//profile={this.props.profile} выше передавать не обязательно, мы уже передаем все пропсы целиком через {...this.props}, сделано для наглядности\r\n\r\nlet mapStateToProps = (state) => ({\r\n  profile: state.profilePage.profile, //начать с initialState\r\n  status: state.profilePage.status, //начать с initialState\r\n  autorizedUserId: state.auth.userId,\r\n  isAuth: state.auth.isAuth,\r\n});\r\n\r\n//помещаем в withRouter обертку Auth\r\n// export default connect(mapStateToProps, { getUserProfile })(withRouter(AuthRedirectComponent));//add compose\r\n// export default connect(mapStateToProps, { getUserProfile })(withRouter(ProfileContainer));\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, { getUserProfile, getStatus, updateStatus, savePhoto }),\r\n  withRouter,\r\n  // withAuthRedirect,\r\n)(ProfileContainer); //add compose\r\n"],"sourceRoot":""}