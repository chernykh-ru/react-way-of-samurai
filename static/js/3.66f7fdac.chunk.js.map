{"version":3,"sources":["components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/MyPosts/MyPosts.module.css","assets/images/avataaars.png","components/Profile/ProfileInfo/ProfileStatusWithHooks.tsx","components/Profile/ProfileInfo/ProfileDataForm.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["module","exports","ProfileStatusWithHooks","status","updateStatus","useState","editMode","setEditMode","localStatus","setLocalStatus","useEffect","onChange","e","target","value","onBlur","autoFocus","onDoubleClick","ProfileDataReduxForm","reduxForm","form","handleSubmit","profile","error","onSubmit","className","styles","profileFormWrapper","Field","placeholder","name","component","Input","type","Textarea","Object","keys","contacts","map","key","contactsWrapper","stylesForm","formSummaryError","ProfileData","isOwner","fullName","aboutMe","userId","lookingForAJob","lookingForAJobDescription","contactTitle","contactValue","onClick","goToEditMode","Contact","ProfileInfo","savePhoto","saveProfile","Preloader","descriptionBlock","userPhoto","src","photos","large","avataaars","alt","inputWrapper","files","length","id","inputFile","htmlFor","inputFileButton","inputFileButtonText","statusBlock","dataWrapper","initialValues","formData","then","Post","props","item","width","height","message","like","likeCounter","maxLength30","maxLengthCreator","AddPostFormRedux","postBlock","validate","required","MyPosts","React","memo","postsElements","posts","reverse","p","i","postsBlock","addPost","newPostText","MyPostsContainer","connect","state","profilePage","dispatch","addPostActionCreator","Profile","ProfileContainer","this","match","params","autorizedUserId","history","push","getUserProfile","getStatus","refreshProfile","prevProps","prevState","Number","Component","compose","auth","isAuth","withRouter"],"mappings":"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","file":"static/js/3.66f7fdac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__1NNXR\",\"userPhoto\":\"ProfileInfo_userPhoto__yWMww\",\"statusBlock\":\"ProfileInfo_statusBlock__3SAiq\",\"inputWrapper\":\"ProfileInfo_inputWrapper__1ARM0\",\"inputFile\":\"ProfileInfo_inputFile__26GYr\",\"inputFileButton\":\"ProfileInfo_inputFileButton__ONqPO\",\"inputFileButtonText\":\"ProfileInfo_inputFileButtonText__3PLiH\",\"contactsWrapper\":\"ProfileInfo_contactsWrapper__2x99X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__tewBo\",\"like\":\"Post_like__uZX4v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__1x4Hf\",\"postBlock\":\"MyPosts_postBlock__1zPAp\",\"posts\":\"MyPosts_posts__2Xfo7\"};","export default __webpack_public_path__ + \"static/media/avataaars.4186f5f3.png\";","import React, { useState, useEffect, ChangeEvent } from 'react';\r\n\r\ntype PropsType ={\r\n  status: string\r\n  updateStatus: (status: string) => void\r\n}\r\n\r\nconst ProfileStatusWithHooks: React.FC<PropsType> = ({status, updateStatus }) => {\r\n  const [editMode, setEditMode] = useState<boolean>(false);\r\n  const [localStatus, setLocalStatus] = useState<string>(status);\r\n\r\n  useEffect(() => {\r\n    setLocalStatus(status);\r\n  }, [status]); //принимает зависимость от статуса прищедшего в пропсах и синхронизирует статусы в ЛС и ГС\r\n\r\n  const activateEditMode = () => {\r\n    setEditMode(true);\r\n    // setStatus(props.status); //сетаем статус из пропсов, чтобы инпут не обнулялся при переходе с других страниц\r\n  };\r\n\r\n  const deactivateEditMode = () => {\r\n    setEditMode(false);\r\n    updateStatus(localStatus); //TC передаем статус(текущее значение поля инпута - сидящее в 'локальном' стейте)\r\n  };\r\n\r\n  const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setLocalStatus(e.target.value); //сетаем в ЛС хука текущее значение поля инпута\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!editMode ? (\r\n        <div>\r\n          <span onDoubleClick={activateEditMode}>{status || '-----'}</span>\r\n        </div> //копия из ГС(пропсы)\r\n      ) : (\r\n        <div>\r\n          <input\r\n            onChange={onStatusChange}\r\n            onBlur={deactivateEditMode}\r\n            autoFocus={true}\r\n            value={localStatus}></input>\r\n        </div> //вначале копия из ЛС, во время изменения сохранение в локальном стейте обработчик onChange, после потери фокуса deactivateEditMode отпраялем данные на сервер, после ответа сервера меняется ГС и рендер статуса\r\n      )}\r\n    </div> //по условию показываем или статус или поле редактирования\r\n  );\r\n};\r\n\r\nexport default ProfileStatusWithHooks;\r\n","import styles from './ProfileInfo.module.css';\r\nimport stylesForm from './../../common/FormsControls/FormsControls.module.css';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { Input, Textarea } from '../../common/FormsControls/FormsControls';\r\n\r\nconst ProfileDataForm = ({ handleSubmit, profile, error }) => {\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.profileFormWrapper}>\r\n      <div>\r\n        <p>Full name: </p>\r\n        <Field placeholder={'Full name'} name={'fullName'} component={Input} />\r\n      </div>\r\n      <div>\r\n        <p>About me:</p>\r\n        <Field placeholder={'About me'} name={'aboutMe'} component={Input} />\r\n      </div>\r\n      <div>\r\n        <p>Looking for a job:</p>\r\n        <Field name={'lookingForAJob'} component={Input} type={'checkbox'} />\r\n      </div>\r\n      <div>\r\n        <p>About skils: </p>\r\n        <Field\r\n          placeholder={'about skills'}\r\n          name={'lookingForAJobDescription'}\r\n          component={Textarea}\r\n        />\r\n      </div>\r\n      <div>\r\n        <b>Contacts: </b>\r\n        {Object.keys(profile.contacts).map((key) => {\r\n          //Метод Object.keys возвращает массив строковых элементов, соответствующих именам перечисляемых свойств, после мапим массив передавая в компонент ключ-значение\r\n          return (\r\n            <div key={key} className={styles.contactsWrapper}>\r\n              {key}: {<Field placeholder={key} name={'contacts.' + key} component={Input} />}\r\n            </div>\r\n          ); //обратимся к profile.contacts и прочитаем свойство по ключу[key](наподобие точечной нотации)\r\n        })}\r\n      </div>\r\n      {error && <div className={stylesForm.formSummaryError}>{error}</div>}\r\n      <button>Отправить</button>\r\n    </form>\r\n  );\r\n};\r\n\r\n//unique name for the form\r\n//оборачиваем нашу форму HOCом reduxForm\r\nconst ProfileDataReduxForm = reduxForm({ form: 'edit-profile' })(ProfileDataForm);\r\n\r\nexport default ProfileDataReduxForm;\r\n","import Preloader from '../../common/preloader/Preloader';\r\nimport styles from './ProfileInfo.module.css';\r\nimport avataaars from '../../../assets/images/avataaars.png';\r\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks'; //следить за переименованием из FC в CC\r\nimport React, { useState } from 'react';\r\nimport ProfileDataReduxForm from './ProfileDataForm';\r\n\r\nconst ProfileInfo = ({ profile, status, updateStatus, isOwner, savePhoto, saveProfile }) => {\r\n  const [editMode, setEditMode] = useState(false);\r\n  // if (props.profile === null || props.profile === undefined)\r\n  if (!profile) {\r\n    return <Preloader />;\r\n  }\r\n\r\n  const onSubmit = (formData) => {\r\n    saveProfile(formData).then(() => {\r\n      setEditMode(false); //при успешном без ошибоксабмите убираем режим редактирования\r\n    });\r\n    // console.log(formData);\r\n  };\r\n\r\n  const onMainPhotoSelected = (e) => {\r\n    // debugger;\r\n    if (e.target.files.length) {\r\n      savePhoto(e.target.files[0]);\r\n    } //проверяем что файлы прицепились и повесили на обработчик инпута колбэк TC\r\n  };\r\n  // debugger;\r\n  return (\r\n    <div>\r\n      <div className={styles.descriptionBlock}>\r\n        <img\r\n          className={styles.userPhoto}\r\n          src={profile.photos.large != null ? profile.photos.large : avataaars}\r\n          alt='user avatar'\r\n        />\r\n\r\n        {/* <div>{isOwner && <input type={'file'} onChange={onMainPhotoSelected} />}</div> */}\r\n        <div className={styles.inputWrapper}>\r\n          {isOwner ? (\r\n            <div>\r\n              <input\r\n                type={'file'}\r\n                onChange={onMainPhotoSelected}\r\n                name='file'\r\n                id='input__file'\r\n                className={styles.inputFile}\r\n              />\r\n              <label htmlFor='input__file' className={styles.inputFileButton}>\r\n                <span className={styles.inputFileButtonText}>Выберите файл</span>\r\n              </label>\r\n            </div> //инпут спрятан за лейбл и стилизован под кнопку\r\n          ) : (\r\n            ''\r\n          )}\r\n        </div>\r\n        <div className={styles.statusBlock}>\r\n          <ProfileStatusWithHooks status={status} updateStatus={updateStatus} />\r\n        </div>\r\n        <div className={styles.dataWrapper}>\r\n          {!editMode ? (\r\n            <ProfileData profile={profile} isOwner={isOwner} setEditMode={setEditMode} />\r\n          ) : (\r\n            <ProfileDataReduxForm initialValues={profile} profile={profile} onSubmit={onSubmit} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ProfileData = ({ profile, isOwner, setEditMode }) => {\r\n  // const goToEditMode = () => {\r\n  //   return setEditMode(true);\r\n  // };\r\n  return (\r\n    <div>\r\n      <div>\r\n        <p>Full name: {profile.fullName}</p>\r\n      </div>\r\n      <div>\r\n        <p>About me: {profile.aboutMe}</p>\r\n      </div>\r\n      <div>\r\n        <p>User id: {profile.userId}</p>\r\n      </div>\r\n      <div>\r\n        <p>Looking for a job: {profile.lookingForAJob ? 'yes' : 'no'}</p>\r\n        {profile.lookingForAJob && (\r\n          <div>\r\n            <p>My skills: {profile.lookingForAJobDescription}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div>\r\n        <b>Contacts: </b>\r\n        {Object.keys(profile.contacts).map((key) => {\r\n          //Метод Object.keys возвращает массив строковых элементов, соответствующих именам перечисляемых свойств, после мапим массив передавая в компонент ключ-значение\r\n          return <Contact key={key} contactTitle={key} contactValue={profile.contacts[key]} />; //обратимся к profile.contacts и прочитаем свойство по ключу[key](наподобие точечной нотации)\r\n        })}\r\n      </div>\r\n      <div>\r\n        {isOwner && <button onClick={(goToEditMode) => setEditMode(true)}>Edit profile</button>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Contact = ({ contactTitle, contactValue }) => {\r\n  return (\r\n    <div className={styles.contactsWrapper}>\r\n      {contactValue && (\r\n        <p>\r\n          {contactTitle}: {contactValue}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileInfo;\r\n","import styles from './Post.module.css';\r\n\r\nconst Post = (props) => (\r\n  <div className={styles.item}>\r\n    <img\r\n      src='https://e7.pngegg.com/pngimages/57/256/png-clipart-bender-philip-j-fry-computer-icons-leela-bender-smiley-cartoon.png'\r\n      width='60'\r\n      height='60'\r\n      alt='avatar'\r\n    />\r\n    <p>{props.message}</p>\r\n    <div className={styles.like}>\r\n      <img\r\n        src='https://w7.pngwing.com/pngs/49/109/png-transparent-facebook-like-button-giphy-social-network-advertising-facebook-text-hand-rectangle-thumbnail.png'\r\n        width='15'\r\n        height='15'\r\n        alt='like'\r\n      />\r\n      <span>{props.likeCounter}</span>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Post;\r\n","import Post from './Post/Post';\r\nimport styles from './MyPosts.module.css';\r\nimport React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { required, maxLengthCreator } from '../../../utils/validators/validators';\r\nimport { Textarea } from '../../common/FormsControls/FormsControls';\r\n\r\nconst maxLength30 = maxLengthCreator(30);\r\n\r\nconst AddPostForm = (props) => {\r\n  const { handleSubmit } = props;\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.postBlock}>\r\n      <div>\r\n        <Field\r\n          component={Textarea}\r\n          name={'newPostText'}\r\n          placeholder={'Enter your post text'}\r\n          validate={[required, maxLength30]}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button>Add post</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst AddPostFormRedux = reduxForm({ form: 'postAddPostForm' })(AddPostForm);\r\n\r\nconst MyPosts = React.memo((props) => {\r\n  // debugger;\r\n  const postsElements = [...props.posts] //иммутабельность - меняем отображение постов на странице не затрагивая исходные данные, а делая копию и ее переворачивая\r\n    .reverse()\r\n    .map((p, i) => <Post key={i} message={p.message} likeCounter={p.likeCounter} />);\r\n\r\n  const addNewPost = (value) => {\r\n    props.addPost(value.newPostText);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.postsBlock}>\r\n      <h3>My posts</h3>\r\n      <AddPostFormRedux onSubmit={addNewPost} />\r\n      <div className={styles.posts}>{postsElements}</div>\r\n    </div>\r\n  );\r\n}); //обернули ХОКом мемо, тест, решает проблему с лишними рендерами при неизменившихся пропсах и стейте\r\n\r\nexport default MyPosts;\r\n","import { connect } from 'react-redux';\r\nimport { addPostActionCreator } from '../../../redux/profile-reducer';\r\nimport MyPosts from './MyPosts';\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    posts: state.profilePage.posts,\r\n    newPostText: state.profilePage.newPostText,\r\n  };\r\n};\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addPost: (newPostText) => {\r\n      dispatch(addPostActionCreator(newPostText));\r\n    },\r\n  };\r\n};\r\n\r\nlet MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\nexport default MyPostsContainer;\r\n","import ProfileInfo from './ProfileInfo/ProfileInfo';\r\n// import MyPosts from './MyPosts/MyPosts';\r\n// import classes from './Profile.module.css'\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\r\n// import store from '../../redux/store';\r\n\r\nconst Profile = (props) => {\r\n  // debugger;\r\n  return (\r\n    <div>\r\n      <ProfileInfo\r\n        isOwner={props.isOwner}\r\n        savePhoto={props.savePhoto}\r\n        profile={props.profile}\r\n        status={props.status}\r\n        updateStatus={props.updateStatus}\r\n        saveProfile={props.saveProfile}\r\n      />\r\n      <MyPostsContainer\r\n      // store={props.store}\r\n      // posts={props.profilePage.posts}\r\n      // dispatch={props.dispatch}\r\n      // newPostText={props.profilePage.newPostText}\r\n      // updateNewPostText={props.updateNewPostText}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\nimport Profile from './Profile';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  getUserProfile,\r\n  getStatus,\r\n  updateStatus,\r\n  savePhoto,\r\n  saveProfile,\r\n} from '../../redux/profile-reducer';\r\nimport { withRouter } from 'react-router';\r\n// import { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\n\r\nclass ProfileContainer extends React.Component {\r\n  refreshProfile() {\r\n    let userId = this.props.match.params.userId; //объявляем переменную userId которой присваиваем значение из пропсов(которые появились там после оборачивания ХОКом withRouter)\r\n    // let userId = this.props.match.params.userId || 20627;\r\n    if (!userId) {\r\n      userId = this.props.autorizedUserId;\r\n      // userId = 20627;//проверка что userId не null или undefined\r\n      if (!userId) {\r\n        this.props.history.push('/login');\r\n      } //если и в autorizedUserId нет userId тогда переадресация на Логин встроенным методом withRouter\r\n    }\r\n    this.props.getUserProfile(userId); //TC получения профиля\r\n    this.props.getStatus(userId); //TC получения статуса\r\n  }\r\n\r\n  componentDidMount() {\r\n    // console.log('auth', this.props.autorizedUserId);\r\n    // console.log('params', Number(this.props.match.params.userId));\r\n\r\n    // debugger;\r\n    this.refreshProfile();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // debugger;\r\n    if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n      this.refreshProfile(); //сравниваем текущие пропсы userId с прошлыми\r\n    }\r\n  } //с условием избегаем зациклености ререндеров при получении пропсов\r\n\r\n  render() {\r\n    return (\r\n      <Profile\r\n        {...this.props}\r\n        isOwner={\r\n          !this.props.match.params.userId ||\r\n          Number(this.props.match.params.userId) === this.props.autorizedUserId\r\n        } //если в строке URL есть Id, значит мы на чужой странице, если нет - на своей и можно будет загрузить аватар или проверим если Id это Id авторизированого юзера то тоже можно загрузить аватар\r\n        savePhoto={this.props.savePhoto}\r\n        profile={this.props.profile}\r\n        status={this.props.status}\r\n        updateStatus={this.props.updateStatus}\r\n        saveProfile={this.props.saveProfile} //TC сохранение данных профиля из redux-form\r\n      />\r\n    );\r\n  }\r\n}\r\n//profile={this.props.profile} выше передавать не обязательно, мы уже передаем все пропсы целиком через {...this.props}, сделано для наглядности\r\n\r\nlet mapStateToProps = (state) => ({\r\n  profile: state.profilePage.profile, //начать с initialState\r\n  status: state.profilePage.status, //начать с initialState\r\n  autorizedUserId: state.auth.userId,\r\n  isAuth: state.auth.isAuth,\r\n});\r\n\r\n//помещаем в withRouter обертку Auth\r\n// export default connect(mapStateToProps, { getUserProfile })(withRouter(AuthRedirectComponent));//add compose\r\n// export default connect(mapStateToProps, { getUserProfile })(withRouter(ProfileContainer));\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, { getUserProfile, getStatus, updateStatus, savePhoto, saveProfile }),\r\n  withRouter,\r\n  // withAuthRedirect,\r\n)(ProfileContainer); //add compose\r\n"],"sourceRoot":""}