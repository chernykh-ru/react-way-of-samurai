{"version":3,"sources":["components/common/FormsControls/FormsControls.module.css","components/common/FormsControls/FormsControls.jsx","utils/validators/validators.js","components/Dialogs/Dialogs.module.css","components/Dialogs/DialogItem/DialogItem.jsx","components/Dialogs/Message/Message.jsx","components/Dialogs/AddMessageForm/AddMessageForm.jsx","components/Dialogs/Dialogs.jsx","hoc/withAuthRedirect.js","components/Dialogs/DialogsContainer.jsx"],"names":["module","exports","FormControl","input","meta","props","child","hasError","touched","error","className","styles","formControl","children","Textarea","restProps","Input","required","value","maxLengthCreator","maxLength","length","DialogItem","dialog","avatar","src","avataaars","alt","to","id","activeClassName","activeLink","name","Message","message","maxLength50","AddMessageFormRedux","reduxForm","form","handleSubmit","onSubmit","Field","component","placeholder","validate","Dialogs","dialogsElements","dialogs","map","i","messagesElements","messages","m","isAuth","dialogsItems","messagesUser","addMessage","newMessageText","mapStateToPropsForRedirect","state","auth","compose","connect","dialogsPage","dispatch","addMessageActionCreator","Component","RedirectComponent","this","React"],"mappings":"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","file":"static/js/5.000de1f2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__ZczVY\",\"error\":\"FormsControls_error__-uRCD\",\"formSummaryError\":\"FormsControls_formSummaryError__2HC3s\"};","import styles from './FormsControls.module.css';\r\n\r\nexport const FormControl = ({ input, meta, child, ...props }) => {\r\n  const hasError = meta.touched && meta.error;\r\n\r\n  return (\r\n    <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n      <div>{props.children}</div>\r\n      {hasError && <span>{meta.error}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Textarea = (props) => {\r\n  const { input, meta, child, ...restProps } = props;\r\n\r\n  return (\r\n    <FormControl {...props}>\r\n      <textarea {...input} {...restProps} />\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport const Input = (props) => {\r\n  const { input, meta, child, ...restProps } = props;\r\n\r\n  return (\r\n    <FormControl {...props}>\r\n      <input {...input} {...restProps} />\r\n    </FormControl>\r\n  );\r\n};\r\n\r\n// export const Textarea = ({ input, meta, ...props }) => {\r\n//   const hasError = meta.touched && meta.error;\r\n\r\n//   return (\r\n//     <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n//       <div>\r\n//         <textarea {...input} {...props} />\r\n//       </div>\r\n//       {hasError && <span>{meta.error}</span>}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export const Input = ({ input, meta, ...props }) => {\r\n//   const hasError = meta.touched && meta.error;\r\n\r\n//   return (\r\n//     <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n//       <div>\r\n//         <input {...input} {...props} />\r\n//       </div>\r\n//       {hasError && <span>{meta.error}</span>}\r\n//     </div>\r\n//   );\r\n// };\r\n","export const required = (value) => {\r\n  if (value) return undefined;\r\n  return 'Field is required';\r\n};\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n  if (value && value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n  return undefined;\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__2k5OF\",\"dialogsItems\":\"Dialogs_dialogsItems__1XTni\",\"dialog\":\"Dialogs_dialog__aU1X5\",\"activeLink\":\"Dialogs_activeLink__2ES73\",\"messages\":\"Dialogs_messages__2gINe\",\"avatarWrapper\":\"Dialogs_avatarWrapper__WbZwe\",\"avatar\":\"Dialogs_avatar__2Onne\",\"messagesUser\":\"Dialogs_messagesUser__2OOnJ\",\"messagesFriend\":\"Dialogs_messagesFriend__3wPpz\",\"message\":\"Dialogs_message__2DoC3\"};","import { NavLink } from 'react-router-dom';\r\nimport styles from './../Dialogs.module.css';\r\nimport avataaars from './../../../assets/images/avataaars.svg';\r\n\r\nconst DialogItem = (props) => {\r\n  // debugger\r\n\r\n  return (\r\n    <div className={styles.dialog}>\r\n      <img\r\n        className={styles.avatar}\r\n        src={props.avatar != null ? props.avatar : avataaars}\r\n        alt='avatar'\r\n      />\r\n      <NavLink to={'/dialogs/' + props.id} activeClassName={styles.activeLink}>\r\n        {props.name}\r\n      </NavLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DialogItem;\r\n","import styles from './../Dialogs.module.css';\r\n\r\nconst Message = (props) => {\r\n  return <div className={styles.message}>{props.message}</div>;\r\n};\r\n\r\nexport default Message;\r\n","import { Field } from 'redux-form';\r\nimport { Textarea } from '../../common/FormsControls/FormsControls';\r\nimport { required, maxLengthCreator } from '../../../utils/validators/validators';\r\n\r\nconst maxLength50 = maxLengthCreator(50);\r\n\r\nexport const AddMessageForm = (props) => {\r\n  const { handleSubmit } = props;\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>\r\n        <Field\r\n          component={Textarea}\r\n          name={'newMessageText'}\r\n          placeholder={'Enter your message'}\r\n          validate={[required, maxLength50]}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button>Add message</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","// import { NavLink } from 'react-router-dom';\r\nimport styles from './Dialogs.module.css';\r\nimport DialogItem from './DialogItem/DialogItem';\r\nimport Message from './Message/Message';\r\nimport React from 'react';\r\nimport { Redirect } from 'react-router';\r\n// import { Field, reduxForm } from 'redux-form';\r\n// import { Textarea } from '../common/FormsControls/FormsControls';\r\n// import { required, maxLengthCreator } from '../../utils/validators/validators';\r\nimport { AddMessageForm } from './AddMessageForm/AddMessageForm';\r\nimport { reduxForm } from 'redux-form';\r\n\r\nconst AddMessageFormRedux = reduxForm({ form: 'dialogAddMessageForm' })(AddMessageForm);\r\n\r\nconst Dialogs = (props) => {\r\n  // debugger;\r\n\r\n  const dialogsElements = props.dialogs.map((dialog, i) => (\r\n    <DialogItem key={i} name={dialog.name} id={dialog.id} avatar={dialog.avatar} />\r\n  ));\r\n\r\n  const messagesElements = props.messages.map((m, i) => (\r\n    <Message key={i} message={m.message} id={m.id} />\r\n  ));\r\n\r\n  //в атрибуте value придут свойства как имена полей name у field\r\n  let addNewMassage = (value) => {\r\n    // console.log(value.newMessageText);\r\n    props.addMessage(value.newMessageText);\r\n  }; //add redux-form//передаем в колбэк значение поля ввода и далее диспачим его в стейт\r\n\r\n  if (!props.isAuth) return <Redirect to={'/login'} />; //если пользователь не залогинен(пришедший в пропсах isAuth === false) то закрываем ему доступ к dialogs и перенаправляем на страницу логина\r\n\r\n  return (\r\n    <div className={styles.dialogs}>\r\n      <div className={styles.dialogsItems}>{dialogsElements}</div>\r\n      <div className={styles.messages}>\r\n        <div className={styles.messagesUser}>{messagesElements}</div>\r\n        <AddMessageFormRedux onSubmit={addNewMassage} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dialogs;\r\n","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport { connect } from 'react-redux';\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n  isAuth: state.auth.isAuth, //вытаскиваем из стейта инфу залогинен или нет\r\n});\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n  class RedirectComponent extends React.Component {\r\n    render() {\r\n      if (!this.props.isAuth) return <Redirect to={'/login'} />;\r\n\r\n      return <Component {...this.props} />;\r\n    }\r\n  }\r\n\r\n  //конненктим к стору RedirectComponent которую создали внутри ХОКа, и возвращаем ее наружу\r\n  let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n  return ConnectedAuthRedirectComponent;\r\n};\r\n\r\n//те вызывая хок withAuthRedirect происходит двойное оборачивание(две конт комп одна в другой) коннект оборачивает редирект, а внутри будет сидеть целевая компонента\r\n","import { connect } from 'react-redux';\r\nimport {\r\n  addMessageActionCreator,\r\n  // updateNewMessageTextActionCreator,//add redux-form\r\n} from '../../redux/dialog-reducer';\r\nimport Dialogs from './Dialogs';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\n\r\n//connect в mstp отдаст стейт\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    dialogs: state.dialogsPage.dialogs,\r\n    messages: state.dialogsPage.messages,\r\n    newMessageText: state.dialogsPage.newMessageText,\r\n    // isAuth: state.auth.isAuth, //вытаскиваем из стейта инфу залогинен или нет\r\n  };\r\n};\r\n\r\n//колбэки\r\n//connect в mdtp засунет store.dispatch.bind(store)\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addMessage: (message) => {\r\n      dispatch(addMessageActionCreator(message));\r\n    }, //диспачим сообщение из redux-form //мы диспатчем не экшнкриэйтор, ЭК мы запускаем, он возвращает нам экшн(это объект у которого есть минимум тип) и мы диспатчем это вернувшийся экшн\r\n    // messageChange: (text) => {\r\n    //   dispatch(updateNewMessageTextActionCreator(text));\r\n    // },//add redux-form\r\n  };\r\n};\r\n\r\n//вызываем HOC с нужным параметром(передаем ему нужную целевую компоненту) получаем ответ AuthRedirectComponent и этот ответ мы закидываем целевой компонентой в коннект\r\n// let AuthRedirectComponent = withAuthRedirect(Dialogs);//add compose\r\n// (props) => {\r\n//   if (!this.props.isAuth) return <Redirect to={'/login'} />;\r\n//   return <Dialogs {...props} />; //прокидываем все пропсы в целевую компоненту\r\n// };\r\n\r\n//connect from react-redux\r\n//двойной вызов ()() -  вызываем функцию connect, она возвращает другую функцию и мы вызываем другую функцию, которую нам вернул предыдущий вызов\r\n// const DialogsContainer = connect(mapStateToProps, mapDispatchToProps)(AuthRedirectComponent);//add compose\r\n// const DialogsContainer = connect(mapStateToProps, mapDispatchToProps)(Dialogs);\r\n\r\n//\r\n// export default DialogsContainer;//compose\r\n\r\n//оборачиваем compose (каждая функция примет один параметр, его возвращенное взначение будет передано вышестоящей(слева) функции как аргумент), выполнение идет справа налево(снизу вверх)\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps), withAuthRedirect)(Dialogs);\r\n"],"sourceRoot":""}