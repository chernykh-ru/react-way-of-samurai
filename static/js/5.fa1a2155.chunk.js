(this["webpackJsonpreact-way-of-samurai"]=this["webpackJsonpreact-way-of-samurai"]||[]).push([[5],{522:function(e,t,c){"use strict";c.r(t);var r=c(52),n=c(503),s=c(0),i=c.n(s),j=c(30),a=c(263),u=c(1),o=function(){var e=Object(j.c)(),t=Object(j.d)((function(e){return e.chat.status}));return Object(s.useEffect)((function(){return e(Object(a.c)()),function(){e(Object(a.d)())}}),[]),Object(u.jsxs)("div",{children:["error"===t&&Object(u.jsx)("div",{children:"Some error occured. Please refresh page"}),Object(u.jsx)(b,{}),Object(u.jsx)(l,{})]})},b=function(){var e=Object(s.useRef)(null),t=Object(j.d)((function(e){return e.chat.messages})),c=Object(s.useState)(!0),n=Object(r.a)(c,2),i=n[0],a=n[1];return Object(s.useEffect)((function(){var t;i&&(null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"end"}))}),[t]),Object(u.jsxs)("div",{style:{height:"400px",overflowY:"auto"},onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!i&&a(!0):i&&a(!1)},children:[t.map((function(e,t){return Object(u.jsx)(d,{message:e},e.id)})),Object(u.jsx)("div",{ref:e})]})},d=i.a.memo((function(e){var t=e.message;return Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:t.photo,style:{width:"40px",borderRadius:"50%"},alt:"message"}),Object(u.jsxs)("b",{children:[t.userName," "]}),Object(u.jsxs)("b",{children:["id: ",t.userId]}),Object(u.jsx)("p",{children:t.message}),Object(u.jsx)(n.a,{})]})})),l=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),c=t[0],n=t[1],i=Object(j.d)((function(e){return e.chat.status})),o=Object(j.c)();return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("textarea",{onChange:function(e){return n(e.target.value)},value:c})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{disabled:"pending"===i,onClick:function(){c&&(o(Object(a.b)(c)),n(""))},children:"send"})})]})};t.default=function(){return Object(u.jsx)(o,{})}}}]);
//# sourceMappingURL=5.fa1a2155.chunk.js.map